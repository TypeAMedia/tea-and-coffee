{"version":3,"sources":["assets/icon_costa.svg","assets/icon_greggs.svg","assets/icon_nero.svg","assets/icon_muffin.svg","assets/icon_esquire.svg","assets/icon_pret.svg","assets/icon_starbuck.svg","assets/LogoTnC.png","assets/home.svg","assets/data/coffeeshop_index2.csv","components/Aside.js","contexts/BrandContext.js","components/map-section/ChartWrapper.js","components/map-section/brands/BrandLogo.js","components/map-section/brands/BrandLogos.js","contexts/MapContext.js","components/map-section/MapSection.js","components/map-section/brands/BrandLogoStatic.js","contexts/PlaceContext.js","components/dropdown/Dropdown.js","App.js","index.js"],"names":["module","exports","Aside","props","className","class","children","BrandContext","createContext","ChartWrapper","svgRef","useRef","legendRef","brandLabels","costa","nero","greggs","muffin","pret","starbucks","esquire","getColour","brand","useEffect","svg","select","current","legend","HEIGHT","clientHeight","WIDTH","clientWidth","attr","projection","geoAlbers","center","rotate","parallels","scale","translate","path","geoPath","chartData","csvValues","Array","from","Object","values","csvData","maxValue","Math","max","map","d","setMaxvalue","colourScale","scaleLinear","domain","range","colourScaleAlt","selectAll","data","join","enter","append","update","mapContainer","call","zoom","scaleExtent","on","d3Event","transform","style","k","_zoom","scaleBy","transition","duration","setPlace","uid","i","e","tooltip","document","getElementById","position","posX","offsetX","x","location","length","left","top","y","innerHTML","display","exit","remove","window","addEventListener","Consumer","context","id","ref","toFixed","onMouseOut","BrandLogo","currentBrandLogo","IconCosta","IconGreggs","IconNero","IconMuffin","IconEsquire","IconPret","IconStarbuck","_class","src","alt","onClick","event","querySelectorAll","forEach","el","classList","target","add","setBrand","brands","BrandLogos","key","MapContext","MapSection","useState","mapContextData","brandContextData","Fragment","background","IconHome","PlaceContext","DropdownItem","updateLocation","setLocation","data-value","label","Dropdown","selectWrapper","open","setOpen","placeContextData","tabIndex","sort","a","b","localeCompare","App","setChartData","coffeeshopCsvObj","setCoffeeshopCsvObj","place","features","topojson","map_data","coffeeshopCsv","csv","coffeeshopData","Promise","all","then","csvObj","housePrice","population","caffeNero","esquires","muffinBreak","pretAManger","loc_id","_placeholder","value","Provider","BrandLogoStatic","replace","keys","slice","LogoGraphics","ReactDOM","render","StrictMode"],"mappings":"4GAAAA,EAAOC,QAAU,IAA0B,wC,mBCA3CD,EAAOC,QAAU,IAA0B,yC,mBCA3CD,EAAOC,QAAU,IAA0B,uC,mBCA3CD,EAAOC,QAAU,IAA0B,yC,mBCA3CD,EAAOC,QAAU,IAA0B,0C,mBCA3CD,EAAOC,QAAU,IAA0B,uC,mBCA3CD,EAAOC,QAAU,IAA0B,2C,mBCA3CD,EAAOC,QAAU,IAA0B,qC,mBCA3CD,EAAOC,QAAU,IAA0B,kC,mBCA3CD,EAAOC,QAAU,IAA0B,+C,kj+WCU5BC,MARf,SAAeC,GACb,OACE,2BAAOC,UAAWD,EAAME,OACrBF,EAAMG,W,eCHEC,EADMC,0BCgONC,EA5NM,SAACN,GACrB,IAAMO,EAASC,mBACTC,EAAYD,mBACZE,EAAc,CACnBC,MAAO,QACPC,KAAM,YACNC,OAAQ,SACRC,OAAQ,eACRC,KAAM,OACNC,UAAW,YACXC,QAAS,WAOV,SAASC,EAAUC,GAClB,OAAQA,GACP,IAAM,QACL,MAAO,UACR,IAAM,SACL,MAAO,UACR,IAAM,OACL,MAAO,UACR,IAAM,SACL,MAAO,UACR,IAAM,OACL,MAAO,UACR,IAAM,UACL,MAAO,UACR,IAAM,YACL,MAAO,UACR,QACC,OAAO,MA8JV,OA3JAC,qBAAU,WACT,IAAMC,EAAMC,YAAOf,EAAOgB,SACpBC,EAASF,YAAOb,EAAUc,SAC5BE,EAASlB,EAAOgB,QAAQG,aACxBC,EAAQpB,EAAOgB,QAAQK,YAG3BJ,EACEK,KAAK,SAAUJ,GACfI,KAAK,QAAS,MAChB,IAAIC,EAAaC,cACfC,OAAO,CAAC,IAAK,OACbC,OAAO,CAAC,IAAK,IACbC,UAAU,CAAC,GAAI,KACfC,MAAM,MACNC,UAAU,CAACT,EAAQ,EAAGF,EAAS,IAI7BY,EAAOC,cAAUR,WAAWA,GAChC,GAAK9B,EAAMuC,UAAX,CAEA,IAAMC,EAAYC,MAAMC,KAAKC,OAAOC,OAAO5C,EAAM6C,UAC3CC,EAAqF,IAA1EC,KAAKC,IAAL,MAAAD,KAAI,YAAQN,MAAMC,KAAKF,EAAUS,KAAI,SAAAC,GAAC,OAAKA,EAAC,QAAYlD,EAAMmB,aAC/EnB,EAAMmD,YAAYL,GAElB,IAAIM,EAAcC,cAAcC,OAAO,CAAC,EAAGR,IAAWS,MAAM,CAAC,UAAWrC,EAAUlB,EAAMmB,SACpFqC,EAAiBH,cAAcC,OAAO,CAAC,EAAGR,IAAWS,MAAM,CAACrC,EAAUlB,EAAMmB,OAAQ,YAC9EE,EAAIoC,UAAU,QAAQC,KAAK,CAAC,OAAOC,MAAK,SAAAC,GAAK,OAAIA,EAAMC,OAAO,WAC/CJ,UAAU,kBAAkBC,KAAK,CAAC,OACzDC,MAAK,SAAAC,GAAK,OAAIA,EAAMC,OAAO,kBAC1BhC,KAAK,oBAAqB,cAC1BA,KAAK,KAAM,sBACZ,SAAAiC,GAAM,OAAIA,EACRjC,KAAK,KAAM,sBAGA4B,UAAU,QACvBC,KAAK,CAAC,EAAGZ,IACTa,MAAK,SAAAC,GACLA,EAAMC,OAAO,QACXhC,KAAK,UAAU,SAAAqB,GAAC,gBAAOA,EAAP,QAChBrB,KAAK,cAAc,SAAAqB,GAAC,OAAIM,EAAeN,SAEzC,SAAAY,GACCA,EACEjC,KAAK,UAAU,SAAAqB,GAAC,gBAAOA,EAAP,QAChBrB,KAAK,cAAc,SAAAqB,GAAC,OAAIM,EAAeN,SAI5C,IAAIa,EAAe1C,EAAIoC,UAAU,uBAAuBC,KAAK,CAAC,OAC5DC,MAAK,SAAAC,GAAK,OACVA,EAAMC,OAAO,KAAKhC,KAAK,QAAS,yBAChC,SAAAiC,GAAM,OAAIA,EAAOjC,KAAK,QAAS,iCAGjCR,EAAI2C,KAAKC,cAAOC,YAAY,CAAC,EAAG,KAAKC,GAAG,QACvC,WACCJ,EAAalC,KAAK,YAAauC,IAAQC,WACvCpB,EAAIQ,UAAU,QAAQa,MAAM,eAAgB,GAAMF,IAAQC,UAAUE,OAQtE,IAAIC,EAAQP,cAAOE,GAAG,QAJtB,WACCJ,EAAalC,KAAK,YAAauC,IAAQC,cAKxC/C,YAAO,iBAAiB6C,GAAG,SAAS,WACnCK,EAAMC,QAAQpD,EAAIqD,aAAaC,SAAS,KAAM,QAE/CrD,YAAO,kBAAkB6C,GAAG,SAAS,WACpCK,EAAMC,QAAQpD,EAAIqD,aAAaC,SAAS,KAAM,OAG/CnD,EAAOiC,UAAU,QAAQC,KAAK,CAAC,OAC7BC,MAAK,SAAAC,GACLA,EAAMC,OAAO,QACXhC,KAAK,KAAM,mBACXA,KAAK,SAAU,QACfA,KAAK,QAAS,SACdA,KAAK,KAAM,SACXyC,MAAM,OAAQ,yBACdzC,KAAK,SAAU,QACfA,KAAK,cAAe,KACpBA,KAAK,YAAa,wBAEpB,SAAAiC,GAAM,OAAIA,EACRY,aAAaC,SAAS,KACtBL,MAAM,OAAQ,4BAIlB,IAAIrB,EAAMc,EAAaN,UAAU,aAAaC,KAAK,CAAC,OAClDC,MAAK,SAAAC,GAAK,OACVA,EAAMC,OAAO,KAAKhC,KAAK,QAAS,eAChC,SAAAiC,GAAM,OAAIA,EAAOjC,KAAK,QAAS,uBAGjCoB,EAAIQ,UAAU,QACZC,KAAK1D,EAAMuC,WACXoB,MACA,SAAAC,GACCA,EAAMC,OAAO,QACXhC,KAAK,QAAS,qBACdA,KAAK,IAAKQ,GACVR,KAAK,QAAQ,SAACqB,GACd,OAAIA,GAAKA,EAAC,QAAoBE,EAAyC,KAA5BF,EAAC,QAAYlD,EAAMmB,QACvD,UAEPU,KAAK,SAAU,WACfA,KAAK,eAAgB,UACrBA,KAAK,WAAY,YACjBA,KAAK,SAAU,WACfsC,GAAG,SAAS,SAAAjB,GAAOlD,EAAM4E,SAAS1B,EAAE2B,QACpCV,GAAG,aAAa,SAACjB,EAAG4B,EAAGC,GAEvB,IAAIC,EAAUC,SAASC,eAAe,sBACtCF,EAAQV,MAAMa,SAAW,QAEzB,IAAIC,EAAOhB,IAAQiB,QAAU,IAAOjB,IAAQkB,EAAwB,EAApBpC,EAAEqC,SAASC,OAAc,KAAQpB,IAAQkB,EAAI,GAAM,KACnGN,EAAQV,MAAMmB,KAAOL,EACrBJ,EAAQV,MAAMoB,IAAMtB,IAAQuB,EAAI,GAAK,KACrCX,EAAQY,UAAY1C,EAAEqC,SACtBP,EAAQV,MAAMuB,QAAU,WAExB1B,GAAG,YAAY,SAACjB,GAAQ+B,SAASC,eAAe,sBAAsBZ,MAAMuB,QAAU,UACtF1B,GAAG,aAAa,SAACjB,GAAQ+B,SAASC,eAAe,sBAAsBZ,MAAMuB,QAAU,UACvF1B,GAAG,UAAU,SAACjB,GAAQ+B,SAASC,eAAe,sBAAsBZ,MAAMuB,QAAU,UACpF1B,GAAG,SAAS,SAACjB,GAAQ+B,SAASC,eAAe,sBAAsBZ,MAAMuB,QAAU,UAEnFhE,KAAK,cAAc,SAAAqB,GAAC,OAAIA,EAAC,eAG5B,SAAAY,GACCA,EAAOjC,KAAK,QAAS,qBAEnBA,KAAK,cAAc,SAAAqB,GAAC,OAAIA,EAAC,YACzBrB,KAAK,QAAQ,SAACqB,GACd,OAAIA,GAAKA,EAAC,QAAoBE,EAAyC,KAA5BF,EAAC,QAAYlD,EAAMmB,QACvD,aAIV,SAAA2E,GAAI,OAAIA,EAAKC,YAEfC,OAAOC,iBAAiB,UAAU,SAAAlB,GACjCE,SAASC,eAAe,sBAAsBZ,MAAMuB,QAAU,cAO/D,kBAAC,EAAaK,SAAd,MACE,SAAAC,GAAO,OAAI,yBAAKlG,UAAU,uBAC1B,yBAAKmG,GAAG,qBAAqB9B,MAAO,CAAEuB,QAAS,UAE/C,yBAAK5F,UAAU,6BACd,yBAAKoG,IAAK5F,EAAWR,UAAU,mBAC9B,0BAAMA,UAAU,uBAAuBqF,EAAE,KAAKK,EAAE,SAAUjF,EAAYyF,EAAQhF,QAC9E,0BAAMlB,UAAU,uBAAuBqF,EAAE,KAAKK,EAAE,SAAhD,eACA,0BAAM1F,UAAU,uBAAuBqF,EAAE,KAAKK,EAAE,SAAhD,UACA,0BAAM1F,UAAU,mDAAmDqF,EAAE,KAAKK,EAAE,OAA5E,KACA,0BAAM1F,UAAU,mDAAmDqF,EAAE,KAAKK,EAAE,MAAO3F,EAAM8C,UAAY9C,EAAM8C,SAAW,KAAQwD,QAAQ,GAAK,MAG7I,yBAAKrG,UAAU,qBACd,yBAAKA,UAAU,uBAEd,4BAAQA,UAAU,wCAAwCmG,GAAG,gBAA7D,KACA,4BAAQnG,UAAU,yCAAyCmG,GAAG,iBAA9D,MAED,yBAAKC,IAAK9F,EAAQN,UAAU,eAAesG,WAAY,WAAQtB,SAASC,eAAe,sBAAsBZ,MAAMuB,QAAU,gB,uHCzJnHW,EAtDG,SAACxG,GACjB,IAAIyG,EAAmB,KACftF,EAAUnB,EAAVmB,MACR,OAAQnB,EAAMmB,OACZ,IAAM,QACJsF,EAAmBC,IACnB,MACF,IAAM,SACJD,EAAmBE,IACnB,MACF,IAAM,OACJF,EAAmBG,IACnB,MACF,IAAM,SACJH,EAAmBI,IACnB,MACF,IAAM,UACJJ,EAAmBK,IACnB,MACF,IAAM,OACJL,EAAmBM,IACnB,MACF,IAAM,YACJN,EAAmBO,IACnB,MACF,QACEP,EAAmB,KASvB,IAAIQ,EAAyB,UAAhBjH,EAAMmB,MAAoB,mCAAqC,sBAC5E,OACE,kBAAC,EAAa+E,SAAd,MACE,SAAAC,GACE,OAAO,yBAAKlG,UAAWgH,EACrBC,IAAKT,EACLU,IAAG,UAAKV,EAAL,SACHW,QACE,WAdV,IAA0BrC,IAgBGsC,MAf3BpC,SAASqC,iBAAiB,wBAAwBC,SAAQ,SAAAC,GACxDA,EAAGC,UAAU1B,OAAO,mBAEtBhB,EAAE2C,OAAOD,UAAUE,IAAI,gBAabxB,EAAQyB,SAASzG,UCrDzB0G,EAAS,CAAC,QAAS,SAAU,OAAQ,SAAU,UAAW,OAAQ,aAQzDC,MANf,WACE,OACED,EAAO5E,KAAI,SAAA9B,GAAK,OAAI,kBAAC,EAAD,CAAW4G,IAAK5G,EAAOA,MAAOA,QCLvC6G,EADI3H,0BC4FJ4H,MAtFf,WAAuB,IAAD,EACYC,qBADZ,mBACbpF,EADa,KACHK,EADG,KAGdzC,EAAc,CAClBC,MAAO,QACPC,KAAM,YACNC,OAAQ,SACRC,OAAQ,eACRC,KAAM,OACNC,UAAW,YACXC,QAAS,WAGX,SAASC,EAAUC,GACjB,OAAQA,GACN,IAAM,QACJ,MAAO,UACT,IAAM,SACJ,MAAO,UACT,IAAM,OACJ,MAAO,UACT,IAAM,SACJ,MAAO,UACT,IAAM,OACJ,MAAO,UACT,IAAM,UACJ,MAAO,UACT,IAAM,YACJ,MAAO,UACT,QACE,OAAO,MAKb,OAFAC,qBAAU,cACP,IAED,0BAAMnB,UAAU,WACd,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,gBACb,wBAAIA,UAAU,oBAAd,yCAAuE,6BAAvE,sCACA,wBAAIA,UAAU,uBAAd,6FAEA,kBAAC,EAAWiG,SAAZ,MACG,SAAAiC,GAAc,OACb,kBAAC,EAAajC,SAAd,MACG,SAAAkC,GAAgB,aAAI,kBAAC,IAAMC,SAAP,KACnB,yBAAKpI,UAAU,WACb,yBAAKA,UAAU,eAAeqE,OAAK,GACjCgE,WAAW,8BAAD,OAAgCpH,EAAUiH,EAAehH,OAAzD,eADuB,mEAEYD,EAAUiH,EAAehH,OAFrC,8EAGQD,EAAUiH,EAAehH,OAHjC,oBAKnC,yBAAKlB,UAAU,qBACb,8BAAO6C,GAAYA,EAAW,KAC9B,8BAAOpC,EAAYyH,EAAehH,OAAlC,uBACA,qCAGJ,kBAAC,EAAD,CACEoB,UAAW4F,GAAkBA,EAAe5F,WAAa4F,EAAe5F,UACxEM,QAASsF,GAAkBA,EAAetF,QAC1C1B,MAAOiH,EAAiBjH,MACxByG,SAAUQ,EAAiBR,SAC3BhD,SAAUuD,EAAevD,SACzB9B,SAAUA,EACVK,YAAaA,YASzB,6BAEE,wBAAIlD,UAAU,mCAAd,yBACA,yBAAKA,UAAU,mBACb,kBAAC,EAAD,W,iBC9BGuG,EA5CG,SAACxG,GACjB,IAAIyG,EAAmB,KACvB,OAAQzG,EAAMmB,OACZ,IAAM,QACJsF,EAAmBC,IACnB,MACF,IAAM,SACJD,EAAmBE,IACnB,MACF,IAAM,OACJF,EAAmBG,IACnB,MACF,IAAM,SACJH,EAAmBI,IACnB,MACF,IAAM,UACJJ,EAAmBK,IACnB,MACF,IAAM,OACJL,EAAmBM,IACnB,MACF,IAAM,YACJN,EAAmBO,IACnB,MACF,IAAM,OACJP,EAAmB8B,IACnB,MACF,QACE9B,EAAmB,KAIvB,OACE,kBAAC,EAAaP,SAAd,MACE,SAAAC,GACE,OAAO,yBAAKlG,UAAU,8BACpBiH,IAAKT,EACLU,IAAG,UAAKV,EAAL,eC9CE+B,G,MADMnI,2BCIrB,SAASoI,EAAazI,GACpB,SAAS0I,IACP1I,EAAM2I,aAAe3I,EAAM2I,YAAY3I,EAAMuF,UAE/C,OACE,kBAAC,EAAWW,SAAZ,MAEI,SAAAiC,GAAc,OACZ,0BACElI,UAAU,gBACV2I,aAAW,QACXxB,QAASsB,GACT1I,EAAM6I,MAJR,QAiDKC,MAvCf,WACE,IAAMC,EAAgBvI,mBADJ,EAEM0H,oBAAS,GAFf,mBAEXc,EAFW,KAELC,EAFK,KAIlB,OACE,yBAAK5C,IAAK0C,EAAe9I,UAAU,wBAAwBmH,QACzD,WACE6B,GAASD,KAGX,kBAAC,EAAW9C,SAAZ,MACG,SAAAiC,GAAc,OACb,kBAAC,EAAajC,SAAd,MACG,SAAAgD,GAAgB,OACf,yBAAKjJ,UAAU,iBACb,wBAAIA,UAAU,kBAAd,uBACA,yBAAKkJ,SAAS,IAAIlJ,UAAU,0BAC1B,8BAAOkI,GAAkBA,EAAetF,SAAWqG,GAAoBA,EAAgB,MAAYf,EAAetF,QAAQqG,EAAgB,OAAvC,SAAgE,qBACnK,yBAAKjJ,UAAU,WAGhB+I,EACC,yBAAM/I,UAAU,kBAEZkI,EAAetF,SAAYJ,MAAMC,KAAKC,OAAOC,OAAOuF,EAAetF,UAChEuG,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAC,SAAaE,cAAcD,EAAC,aAAgBrG,KAAI,SAAAC,GAC/D,OAAO,kBAACuF,EAAD,CAAcV,IAAK7E,EAAE2B,IAAKgE,MAAO3F,EAAEqC,SAAUA,SAAUrC,EAAE2B,IAAK8D,YAAaO,EAAiBtE,eAGzG,Y,iCCuHL4E,MA1Jf,WACE,IAAM9I,EAAc,CAClBC,MAAO,QACPC,KAAM,YACNC,OAAQ,SACRC,OAAQ,eACRC,KAAM,OACNC,UAAW,YACXC,QAAS,WARE,EAYqBiH,mBAAS,MAZ9B,mBAYN3F,EAZM,KAYKkH,EAZL,OAamCvB,mBAAS,MAb5C,mBAaNwB,EAbM,KAaYC,EAbZ,OAcazB,mBAAS,SAdtB,mBAcN/G,EAdM,KAcCyG,EAdD,OAeaM,mBAAS,IAftB,mBAeN0B,EAfM,KAeChF,EAfD,KAiBbxD,qBAAU,WAER,IAAMyI,EAAWC,IAAiBC,EAAU,gCAEtCC,EAAgBC,YAAIC,KAC1BC,QAAQC,IAAI,CAACP,EAAUG,IAAgBK,MAAK,SAAAzH,GAC1C,IAAM0H,EAAS,GACf1H,EAAO,GAAG2E,SAAQ,SAAArE,GAChBoH,EAAOpH,EAAE,kBAAoB,CAC3BqH,WAAYrH,EAAE,gBACdqC,SAAUrC,EAAC,SACX2B,IAAK3B,EAAE,iBACPsH,WAAYtH,EAAC,WACb,QAAW,CACTtC,MAAOsC,EAAC,YACRvC,OAAQuC,EAAC,QACTjC,SAAUiC,EAAC,WACXrC,QAASqC,EAAC,SACVpC,QAASoC,EAAC,cACVnC,MAAOmC,EAAC,cACRlC,WAAYkC,EAAC,aAEf,MAAS,CACPuH,WAAYvH,EAAC,YACbvC,OAAQuC,EAAC,QACTwH,UAAWxH,EAAC,WACZrC,QAASqC,EAAC,SACVyH,aAAczH,EAAC,cACf0H,aAAc1H,EAAC,cACflC,WAAYkC,EAAC,iBAInByG,EAAoBW,GACpBb,EAAa7G,EAAO,GAAGiH,SAAS5G,KAAI,SAAAC,GAClC,IAAM2H,EAAS3H,EAAC,WAAD,QACf,OAAQ,eAAQA,EAAR,GAAcoH,EAAOO,aAGhC,IACH,IAAMC,EAAe,CAAC,MAAO,MAAO,OAAO7H,KAAI,SAAAC,GAC7C,OAAO,yBAAKjD,UAAU,YAAY8H,IAAK7E,GACrC,0BAAMjD,UAAU,6BACd,yBAAKA,UAAU,qBAAqBiD,IAGtC,yBAAKjD,UAAU,6BACb,4BAAKS,EAAYwC,EAAE/B,QACnB,4BAAI,8BAAO+B,EAAE6H,aAKnB,OACE,yBAAK9K,UAAU,OACb,kBAAC,EAAD,CAAOC,MAAM,+BACX,yBAAKD,UAAU,yBACb,wBAAIA,UAAU,gBAAd,uBAEF,uBAAGA,UAAU,wCAAb,qGAGA,uBAAGA,UAAU,wCAAb,mMAOF,kBAAC,EAAa+K,SAAd,CAAuBD,MAAO,CAAE5J,MAAOA,EAAOyG,SAAUA,IACtD,kBAAC,EAAWoD,SAAZ,CAAqBD,MAAO,CAAExI,UAAWA,EAAWM,QAAS6G,EAAkBvI,MAAOA,EAAOyI,MAAOA,EAAOhF,SAAUA,IACnH,kBAAC,EAAD,MACA,kBAAC,EAAaoG,SAAd,CAAuBD,MAAO,CAAEnB,MAAOA,EAAOhF,SAAUA,IACtD,kBAAC,EAAD,CAAO1E,MAAM,+BAGX,yBAAKD,UAAU,kEACb,kBAAC,EAAD,MACA,yBAAKA,UAAU,cAEb,6BACE,wBAAIA,UAAU,mCAAmCyJ,GAAoBA,EAAiBE,GAASF,EAAiBE,GAAOrE,SAAW,IAElI,yBAAKtF,UAAU,gBACb,kBAACgL,EAAD,CAAiB9J,MAAM,SACvB,wBAAIlB,UAAU,mCAAd,uBACA,yBAAKA,UAAU,oCACZyJ,GAAoBA,EAAiBE,GAASF,EAAiBE,GAAOW,WAAWW,QAAQ,MAAO,IAAM,KAI3G,yBAAKjL,UAAU,gBACb,kBAACgL,EAAD,CAAiB9J,MAAOA,IACxB,wBAAIlB,UAAU,mCAAd,aAA2DkB,EAAQT,EAAYS,GAAS,cAAxF,uBACA,yBAAKlB,UAAU,oCACZyJ,GAAoBA,EAAiBE,GAASF,EAAiBE,GAAjB,QAAmCzI,GAAS,MAKjG,6BACE,wBAAIlB,UAAU,mCAAd,yCAEA,yBAAKA,UAAU,mCACZ2J,EAAQ,GAAKkB,EACbpB,GAAoBA,EAAiBE,GAASnH,MAAMC,KAAKC,OAAOwI,KAAKzB,EAAiBE,GAAjB,SAAoC3G,KAAI,SAAAC,GAC5G,MAAO,CAAE/B,MAAO+B,EAAG6H,MAAOrB,EAAiBE,GAAjB,QAAmC1G,QAC3DkG,MAAK,SAACC,EAAGC,GAAJ,OAAWA,EAAEyB,OAAS1B,EAAE0B,SAAOK,MAAM,EAAG,GAAGnI,KAAI,SAAAC,GACtD,OAAO,yBAAKjD,UAAU,YAAY8H,IAAG,WAAM7E,EAAE/B,QAC3C,0BAAMlB,UAAU,6BACd,kBAACgL,EAAD,CAAiB9J,MAAO+B,EAAE/B,SAE5B,yBAAKlB,UAAU,6BACb,4BAAKS,EAAYwC,EAAE/B,QACnB,4BAAI,8BAAO+B,EAAE6H,OAAb,4BAGD,QAQf,kBAAC,EAAD,KACE,4BAAQ9K,UAAU,iCAAgC,yBAAKA,UAAU,qBAC/D,yBAAKA,UAAU,4BAA4BiH,IAAKmE,IAAclE,IAAI,6BC5JlFmE,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFvG,SAASC,eAAe,kB","file":"static/js/main.049d66f1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icon_costa.282c090d.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_greggs.26e8e6f6.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_nero.ba474c07.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_muffin.296a0312.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_esquire.955db204.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_pret.b2610c89.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_starbuck.70f59637.svg\";","module.exports = __webpack_public_path__ + \"static/media/LogoTnC.cd76c452.png\";","module.exports = __webpack_public_path__ + \"static/media/home.373154a0.svg\";","module.exports = __webpack_public_path__ + \"static/media/coffeeshop_index2.f43b14d8.csv\";","import React from 'react'\r\n\r\nfunction Aside(props) {\r\n  return (\r\n    <aside className={props.class}>\r\n      {props.children}\r\n    </aside>\r\n  )\r\n}\r\n\r\nexport default Aside\r\n","import{createContext} from 'react'\r\nconst BrandContext = createContext()\r\nexport default BrandContext\r\n","import React, { useRef, useEffect, } from 'react';\r\nimport { select, geoPath, geoAlbers, scaleLinear, scaleLog, zoom, event as d3Event, mouse } from 'd3'\r\nimport BrandContext from '../../contexts/BrandContext';\r\n\r\n\r\nconst ChartWrapper = (props) => {\r\n\tconst svgRef = useRef();\r\n\tconst legendRef = useRef();\r\n\tconst brandLabels = {\r\n\t\tcosta: \"Costa\",\r\n\t\tnero: \"Cafe Nero\",\r\n\t\tgreggs: \"Greggs\",\r\n\t\tmuffin: \"Muffin Break\",\r\n\t\tpret: \"Pret\",\r\n\t\tstarbucks: \"Starbucks\",\r\n\t\tesquire: \"Esquire\",\r\n\r\n\t}\r\n\r\n\t// const [chartData, setChartData] = useState()\r\n\t// const chartArea = useRef(null)\r\n\t// const [chart, setChart] = useState(null)\r\n\tfunction getColour(brand) {\r\n\t\tswitch (brand) {\r\n\t\t\tcase ('costa'):\r\n\t\t\t\treturn \"#902833\"\r\n\t\t\tcase ('greggs'):\r\n\t\t\t\treturn \"#007BBA\"\r\n\t\t\tcase ('nero'):\r\n\t\t\t\treturn \"#668DD6\"\r\n\t\t\tcase ('muffin'):\r\n\t\t\t\treturn \"#491225\"\r\n\t\t\tcase ('pret'):\r\n\t\t\t\treturn \"#B20D3B\"\r\n\t\t\tcase ('esquire'):\r\n\t\t\t\treturn \"#d1a06f\"\r\n\t\t\tcase ('starbucks'):\r\n\t\t\t\treturn \"#006241\"\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tconst svg = select(svgRef.current);\r\n\t\tconst legend = select(legendRef.current);\r\n\t\tlet HEIGHT = svgRef.current.clientHeight;\r\n\t\tlet WIDTH = svgRef.current.clientWidth;\r\n\r\n\r\n\t\tlegend\r\n\t\t\t.attr(\"height\", HEIGHT)\r\n\t\t\t.attr(\"width\", \"60\")\r\n\t\tlet projection = geoAlbers()\r\n\t\t\t.center([1.5, 55.2])\r\n\t\t\t.rotate([4.4, 0])\r\n\t\t\t.parallels([50, 60])\r\n\t\t\t.scale(2600)\r\n\t\t\t.translate([WIDTH / 2, HEIGHT / 2]);\r\n\r\n\r\n\r\n\t\tvar path = geoPath().projection(projection);\r\n\t\tif (!props.chartData) return\r\n\r\n\t\tconst csvValues = Array.from(Object.values(props.csvData));\r\n\t\tconst maxValue = Math.max(...Array.from(csvValues.map(d => +d['per100k'][props.brand]))) * 100000\r\n\t\tprops.setMaxvalue(maxValue)\r\n\r\n\t\tlet colourScale = scaleLinear().domain([0, maxValue]).range([\"#C4C4C4\", getColour(props.brand)])\r\n\t\tlet colourScaleAlt = scaleLinear().domain([0, maxValue]).range([getColour(props.brand), \"#C4C4C4\"])\r\n\t\tvar def = svg.selectAll('defs').data([null]).join(enter => enter.append('defs'))\r\n\t\tvar linearGradient = def.selectAll(\"linearGradient\").data([null])\r\n\t\t\t.join(enter => enter.append('linearGradient')\r\n\t\t\t\t.attr('gradientTransform', 'rotate(90)')\r\n\t\t\t\t.attr('id', 'linear-gradient'),\r\n\t\t\t\tupdate => update\r\n\t\t\t\t\t.attr('id', 'linear-gradient')\r\n\t\t\t)\r\n\r\n\t\tlinearGradient.selectAll(\"stop\")\r\n\t\t\t.data([0, maxValue])\r\n\t\t\t.join(enter => {\r\n\t\t\t\tenter.append(\"stop\")\r\n\t\t\t\t\t.attr(\"offset\", d => `${d}%`)\r\n\t\t\t\t\t.attr(\"stop-color\", d => colourScaleAlt(d));\r\n\t\t\t},\r\n\t\t\t\tupdate => {\r\n\t\t\t\t\tupdate\r\n\t\t\t\t\t\t.attr(\"offset\", d => `${d}%`)\r\n\t\t\t\t\t\t.attr(\"stop-color\", d => colourScaleAlt(d));\r\n\t\t\t\t}\r\n\t\t\t)\r\n\r\n\t\tvar mapContainer = svg.selectAll('.TnC__map-container').data([null])\r\n\t\t\t.join(enter =>\r\n\t\t\t\tenter.append(\"g\").attr('class', 'TnC__map-container'),\r\n\t\t\t\tupdate => update.attr('class', 'TnC__map-container updated')\r\n\t\t\t)\r\n\r\n\t\tsvg.call(zoom().scaleExtent([1, 20]).on('zoom',\r\n\t\t\t() => {\r\n\t\t\t\tmapContainer.attr(\"transform\", d3Event.transform)\r\n\t\t\t\tmap.selectAll(\"path\").style(\"stroke-width\", 1 / +(d3Event.transform.k))\r\n\t\t\t}\r\n\t\t))\r\n\r\n\t\tfunction zoomed() {\r\n\t\t\tmapContainer.attr(\"transform\", d3Event.transform);\r\n\t\t}\r\n\r\n\t\tlet _zoom = zoom().on(\"zoom\", zoomed)\r\n\r\n\t\tselect(\"#TnC__zoom_in\").on(\"click\", function () {\r\n\t\t\t_zoom.scaleBy(svg.transition().duration(250), 1.2);\r\n\t\t});\r\n\t\tselect(\"#TnC__zoom_out\").on(\"click\", function () {\r\n\t\t\t_zoom.scaleBy(svg.transition().duration(250), 0.8);\r\n\t\t});\r\n\r\n\t\tlegend.selectAll('rect').data([null])\r\n\t\t\t.join(enter => {\r\n\t\t\t\tenter.append('rect')\r\n\t\t\t\t\t.attr(\"id\", \"TnC-map__legend\")\r\n\t\t\t\t\t.attr(\"height\", \"33em\")\r\n\t\t\t\t\t.attr(\"width\", \"1.5em\")\r\n\t\t\t\t\t.attr('rx', \"0.8em\")\r\n\t\t\t\t\t.style(\"fill\", \"url(#linear-gradient)\")\r\n\t\t\t\t\t.attr(\"stroke\", \"grey\")\r\n\t\t\t\t\t.attr(\"stroke-size\", \"2\")\r\n\t\t\t\t\t.attr(\"transform\", \"translate(22, 50)\")\r\n\t\t\t},\r\n\t\t\t\tupdate => update\r\n\t\t\t\t\t.transition().duration(500)\r\n\t\t\t\t\t.style(\"fill\", \"url(#linear-gradient)\")\r\n\t\t\t)\r\n\r\n\r\n\t\tvar map = mapContainer.selectAll('.TnC__map').data([null])\r\n\t\t\t.join(enter =>\r\n\t\t\t\tenter.append(\"g\").attr('class', 'TnC__map'),\r\n\t\t\t\tupdate => update.attr('class', 'TnC__map updated')\r\n\t\t\t)\r\n\r\n\t\tmap.selectAll('path')\r\n\t\t\t.data(props.chartData)\r\n\t\t\t.join(\r\n\t\t\t\tenter => {\r\n\t\t\t\t\tenter.append('path')\r\n\t\t\t\t\t\t.attr(\"class\", \"TnC-map__map-path\")\r\n\t\t\t\t\t\t.attr('d', path)\r\n\t\t\t\t\t\t.attr('fill', (d) => {\r\n\t\t\t\t\t\t\tif (d && d['per100k']) return colourScale(+d['per100k'][props.brand] * 100000)\r\n\t\t\t\t\t\t\treturn \"#fff\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.attr(\"stroke\", '#4d4d4d')\r\n\t\t\t\t\t\t.attr(\"stroke-width\", '0.05em')\r\n\t\t\t\t\t\t.attr(\"position\", \"relative\")\r\n\t\t\t\t\t\t.attr(\"cursor\", \"pointer\")\r\n\t\t\t\t\t\t.on('click', d => { props.setPlace(d.uid) })\r\n\t\t\t\t\t\t.on('mousemove', (d, i, e) => {\r\n\r\n\t\t\t\t\t\t\tlet tooltip = document.getElementById(\"TnC-chart__tooltip\");\r\n\t\t\t\t\t\t\ttooltip.style.position = \"fixed\";\r\n\t\t\t\t\t\t\t// tooltip.style.display= \"none\"\r\n\t\t\t\t\t\t\tlet posX = d3Event.offsetX > 312 ? (d3Event.x - d.location.length * 9) + \"px\" : (d3Event.x + 10) + 'px';\r\n\t\t\t\t\t\t\ttooltip.style.left = posX;\r\n\t\t\t\t\t\t\ttooltip.style.top = d3Event.y - 40 + 'px';\r\n\t\t\t\t\t\t\ttooltip.innerHTML = d.location;\r\n\t\t\t\t\t\t\ttooltip.style.display = \"block\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('mouseout', (d) => { document.getElementById(\"TnC-chart__tooltip\").style.display = \"none\"; })\r\n\t\t\t\t\t\t.on('touchmove', (d) => { document.getElementById(\"TnC-chart__tooltip\").style.display = \"none\"; })\r\n\t\t\t\t\t\t.on('scroll', (d) => { document.getElementById(\"TnC-chart__tooltip\").style.display = \"none\"; })\r\n\t\t\t\t\t\t.on('wheel', (d) => { document.getElementById(\"TnC-chart__tooltip\").style.display = \"none\"; })\r\n\t\t\t\t\t\t// .append('title')\r\n\t\t\t\t\t\t.attr(\"data-title\", d => d['location'])\r\n\r\n\t\t\t\t},\r\n\t\t\t\tupdate => {\r\n\t\t\t\t\tupdate.attr(\"class\", \"TnC-map__map-path\")\r\n\t\t\t\t\t\t// .transition().duration(500)\r\n\t\t\t\t\t\t.attr(\"data-title\", d => d['location'])\r\n\t\t\t\t\t\t.attr('fill', (d) => {\r\n\t\t\t\t\t\t\tif (d && d['per100k']) return colourScale(+d['per100k'][props.brand] * 100000)\r\n\t\t\t\t\t\t\treturn \"#fff\"\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t},\r\n\t\t\t\texit => exit.remove()\r\n\t\t\t)\r\n\t\twindow.addEventListener('scroll', e => {\r\n\t\t\tdocument.getElementById(\"TnC-chart__tooltip\").style.display = \"none\";\r\n\t\t})\r\n\t})\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<BrandContext.Consumer>\r\n\t\t\t{context => <div className=\"TnC-map__chart-area\">\r\n\t\t\t\t<div id=\"TnC-chart__tooltip\" style={{ display: \"none\" }}></div>\r\n\r\n\t\t\t\t<div className=\"TnC-map__legend-container\">\r\n\t\t\t\t\t<svg ref={legendRef} className=\"TnC-map__legend\">\r\n\t\t\t\t\t\t<text className='TnC-map__legend-text' x=\"30\" y=\"0.9em\" >{brandLabels[context.brand]}</text>\r\n\t\t\t\t\t\t<text className='TnC-map__legend-text' x=\"30\" y=\"2.2em\" >per 100,000</text>\r\n\t\t\t\t\t\t<text className='TnC-map__legend-text' x=\"30\" y=\"3.3em\" >people</text>\r\n\t\t\t\t\t\t<text className='TnC-map__legend-text TnC-map__legend-text--lower' x=\"40\" y=\"380\" >0</text>\r\n\t\t\t\t\t\t<text className='TnC-map__legend-text TnC-map__legend-text--upper' x=\"40\" y=\"58\" >{props.maxValue ? (props.maxValue / 100000).toFixed(0) : \"\"}</text>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"TnC__svgContainer\">\r\n\t\t\t\t\t<div className=\"TnC_buttonContainer\">\r\n\r\n\t\t\t\t\t\t<button className=\"TnC__zoom-button TnC__zoom-button--in\" id=\"TnC__zoom_in\">+</button>\r\n\t\t\t\t\t\t<button className=\"TnC__zoom-button TnC__zoom-button--out\" id=\"TnC__zoom_out\">-</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<svg ref={svgRef} className=\"TnC-map__svg\" onMouseOut={() => { document.getElementById(\"TnC-chart__tooltip\").style.display = \"none\"; }} ></svg>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>}\r\n\t\t</BrandContext.Consumer>\r\n\t)\r\n}\r\n\r\nexport default ChartWrapper","import React from 'react';\r\nimport IconCosta from '../../../assets/icon_costa.svg';\r\nimport IconGreggs from '../../../assets/icon_greggs.svg';\r\nimport IconNero from '../../../assets/icon_nero.svg';\r\nimport IconMuffin from '../../../assets/icon_muffin.svg';\r\nimport IconEsquire from '../../../assets/icon_esquire.svg';\r\nimport IconPret from '../../../assets/icon_pret.svg';\r\nimport IconStarbuck from '../../../assets/icon_starbuck.svg';\r\nimport BrandContext from '../../../contexts/BrandContext';\r\n\r\nconst BrandLogo = (props) => {\r\n  let currentBrandLogo = null;\r\n  const { brand } = props;\r\n  switch (props.brand) {\r\n    case ('costa'):\r\n      currentBrandLogo = IconCosta\r\n      break;\r\n    case ('greggs'):\r\n      currentBrandLogo = IconGreggs\r\n      break;\r\n    case ('nero'):\r\n      currentBrandLogo = IconNero\r\n      break;\r\n    case ('muffin'):\r\n      currentBrandLogo = IconMuffin\r\n      break;\r\n    case ('esquire'):\r\n      currentBrandLogo = IconEsquire\r\n      break;\r\n    case ('pret'):\r\n      currentBrandLogo = IconPret\r\n      break;\r\n    case ('starbucks'):\r\n      currentBrandLogo = IconStarbuck\r\n      break;\r\n    default:\r\n      currentBrandLogo = null\r\n      break;\r\n  }\r\n  function styleActiveBrand(e) {\r\n    document.querySelectorAll('.TnC-map__brand-logo').forEach(el => {\r\n      el.classList.remove('active-brand')\r\n    })\r\n    e.target.classList.add('active-brand')\r\n  }\r\n  let _class = props.brand === 'costa' ? \"TnC-map__brand-logo active-brand\" : \"TnC-map__brand-logo\";\r\n  return (\r\n    <BrandContext.Consumer>{\r\n      context => {\r\n        return <img className={_class}\r\n          src={currentBrandLogo}\r\n          alt={`${currentBrandLogo} icon`}\r\n          onClick={\r\n            () => {\r\n              // eslint-disable-next-line no-restricted-globals\r\n              styleActiveBrand(event);\r\n              context.setBrand(brand);\r\n            }\r\n          } />\r\n      }\r\n    }\r\n    </BrandContext.Consumer>\r\n  )\r\n}\r\nexport default BrandLogo\r\n","import React from 'react'\r\nimport BrandLogo from './BrandLogo';\r\n\r\nconst brands = ['costa', 'greggs', 'nero', 'muffin', 'esquire', 'pret', 'starbucks']\r\n\r\nfunction BrandLogos() {\r\n  return (\r\n    brands.map(brand => <BrandLogo key={brand} brand={brand}></BrandLogo>)\r\n  )\r\n}\r\n\r\nexport default BrandLogos\r\n","import{createContext} from 'react'\r\nconst MapContext = createContext()\r\nexport default MapContext\r\n","import React, { useEffect, useState } from 'react'\r\nimport ChartWrapper from './ChartWrapper'\r\nimport BrandLogos from './brands/BrandLogos'\r\nimport MapContext from '../../contexts/MapContext';\r\nimport BrandContext from '../../contexts/BrandContext';\r\n// import * as topojson from 'topojson-client'\r\n\r\nfunction MapSection() {\r\n  const [maxValue, setMaxvalue] = useState();\r\n\r\n  const brandLabels = {\r\n    costa: \"Costa\",\r\n    nero: \"Cafe Nero\",\r\n    greggs: \"Greggs\",\r\n    muffin: \"Muffin Break\",\r\n    pret: \"Pret\",\r\n    starbucks: \"Starbucks\",\r\n    esquire: \"Esquire\",\r\n  }\r\n\r\n  function getColour(brand) {\r\n    switch (brand) {\r\n      case ('costa'):\r\n        return \"#902833\"\r\n      case ('greggs'):\r\n        return \"#007BBA\"\r\n      case ('nero'):\r\n        return \"#668DD6\"\r\n      case ('muffin'):\r\n        return \"#491225\"\r\n      case ('pret'):\r\n        return \"#B20D3B\"\r\n      case ('esquire'):\r\n        return \"#d1a06f\"\r\n      case ('starbucks'):\r\n        return \"#006241\"\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n  useEffect(() => {\r\n  }, [])\r\n  return (\r\n    <main className=\"TnC-map\">\r\n      <div className=\"TnC-map__wrapper\">\r\n        <div className=\"TnC-map__map\">\r\n          <h2 className=\"TnC-map__heading\">The density of COFFEE SHOPS per city, <br></br>borough and district across the UK</h2>\r\n          <h3 className=\"TnC-map__subheading\">\r\n            (The deeper the colour = the higher the per capita density of selected coffee shop brand)</h3>\r\n          <MapContext.Consumer>\r\n            {mapContextData =>\r\n              <BrandContext.Consumer>\r\n                {brandContextData => <React.Fragment>\r\n                  <div className=\"legend2\">\r\n                    <div className=\"legend2__bar\" style={{\r\n                      background: `-moz-linear-gradient(left, ${getColour(mapContextData.brand)}, #c4c4c4)`,\r\n                      background: `-webkit-linear-gradient(left, ${getColour(mapContextData.brand)}, #c4c4c4)`,\r\n                      background: `linear-gradient(to right, ${getColour(mapContextData.brand)}, #c4c4c4)`,\r\n                    }}></div>\r\n                    <div className=\"legend2__text-box\">\r\n                      <span>{maxValue && maxValue / 100000}</span>\r\n                      <span>{brandLabels[mapContextData.brand]} per 100,000 people</span>\r\n                      <span>0</span>\r\n                    </div>\r\n                  </div>\r\n                  <ChartWrapper\r\n                    chartData={mapContextData && mapContextData.chartData && mapContextData.chartData}\r\n                    csvData={mapContextData && mapContextData.csvData}\r\n                    brand={brandContextData.brand}\r\n                    setBrand={brandContextData.setBrand}\r\n                    setPlace={mapContextData.setPlace}\r\n                    maxValue={maxValue}\r\n                    setMaxvalue={setMaxvalue}\r\n                  >\r\n                  </ChartWrapper>\r\n                </React.Fragment>\r\n                }\r\n              </BrandContext.Consumer>\r\n            }\r\n          </MapContext.Consumer>\r\n        </div>\r\n        <div>\r\n\r\n          <h4 className=\"TnC-aside__selected-place--attr\">Select a Coffee Shop:</h4>\r\n          <div className=\"TnC-map__brands\">\r\n            <BrandLogos></BrandLogos>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default MapSection\r\n","import React from 'react';\r\nimport IconHome from '../../../assets/home.svg';\r\nimport IconCosta from '../../../assets/icon_costa.svg';\r\nimport IconGreggs from '../../../assets/icon_greggs.svg';\r\nimport IconNero from '../../../assets/icon_nero.svg';\r\nimport IconMuffin from '../../../assets/icon_muffin.svg';\r\nimport IconEsquire from '../../../assets/icon_esquire.svg';\r\nimport IconPret from '../../../assets/icon_pret.svg';\r\nimport IconStarbuck from '../../../assets/icon_starbuck.svg';\r\nimport BrandContext from '../../../contexts/BrandContext';\r\n\r\nconst BrandLogo = (props) => {\r\n  let currentBrandLogo = null;\r\n  switch (props.brand) {\r\n    case ('costa'):\r\n      currentBrandLogo = IconCosta\r\n      break;\r\n    case ('greggs'):\r\n      currentBrandLogo = IconGreggs\r\n      break;\r\n    case ('nero'):\r\n      currentBrandLogo = IconNero\r\n      break;\r\n    case ('muffin'):\r\n      currentBrandLogo = IconMuffin\r\n      break;\r\n    case ('esquire'):\r\n      currentBrandLogo = IconEsquire\r\n      break;\r\n    case ('pret'):\r\n      currentBrandLogo = IconPret\r\n      break;\r\n    case ('starbucks'):\r\n      currentBrandLogo = IconStarbuck\r\n      break;\r\n    case ('home'):\r\n      currentBrandLogo = IconHome\r\n      break;\r\n    default:\r\n      currentBrandLogo = null\r\n      break;\r\n  }\r\n\r\n  return (\r\n    <BrandContext.Consumer>{\r\n      context => {\r\n        return <img className=\"TnC-map__brand-logo--static\"\r\n          src={currentBrandLogo}\r\n          alt={`${currentBrandLogo} icon`}\r\n        />\r\n      }\r\n    }\r\n    </BrandContext.Consumer>\r\n  )\r\n}\r\nexport default BrandLogo\r\n","import{createContext} from 'react'\r\nconst PlaceContext = createContext()\r\nexport default PlaceContext\r\n","import React, { useRef, useState } from 'react'\r\nimport \"./dropdown.scss\"\r\nimport MapContext from '../../contexts/MapContext';\r\nimport PlaceContext from '../../contexts/PlaceContext';\r\n\r\nfunction DropdownItem(props) {\r\n  function updateLocation() {\r\n    props.setLocation && props.setLocation(props.location);\r\n  }\r\n  return (\r\n    <MapContext.Consumer>\r\n      {\r\n        mapContextData =>\r\n          <span\r\n            className=\"custom-option\"\r\n            data-value=\"tesla\"\r\n            onClick={updateLocation}\r\n          >{props.label} </span>\r\n      }\r\n    </MapContext.Consumer>\r\n  )\r\n}\r\n\r\nfunction Dropdown() {\r\n  const selectWrapper = useRef()\r\n  const [open, setOpen] = useState(false)\r\n\r\n  return (\r\n    <div ref={selectWrapper} className=\"custom-select-wrapper\" onClick={\r\n      () => {\r\n        setOpen(!open)\r\n      }\r\n    }>\r\n      <MapContext.Consumer>\r\n        {mapContextData =>\r\n          <PlaceContext.Consumer>\r\n            {placeContextData =>\r\n              <div className=\"custom-select\">\r\n                <h3 className=\"dropdown_label\">Select a Location: </h3>\r\n                <div tabIndex=\"0\" className=\"custom-select__trigger\">\r\n                  <span>{mapContextData && mapContextData.csvData && placeContextData && placeContextData[\"place\"] ? mapContextData.csvData[placeContextData[\"place\"]]['location'] : \"Select a location\"}</span>\r\n                  <div className=\"arrow\"></div>\r\n                  {/* {mapContextData.csvData && console.log(Object.values(mapContextData.csvData))} */}\r\n                </div>\r\n                {open ?\r\n                  < div className=\"custom-options\">\r\n                    {\r\n                      mapContextData.csvData && (Array.from(Object.values(mapContextData.csvData))\r\n                        .sort((a, b) => a[\"location\"].localeCompare(b[\"location\"]))).map(d => {\r\n                          return <DropdownItem key={d.uid} label={d.location} location={d.uid} setLocation={placeContextData.setPlace}></DropdownItem>\r\n                        })}\r\n                  </div>\r\n                  : \"\"\r\n                }\r\n              </div>\r\n            }\r\n          </PlaceContext.Consumer>\r\n        }\r\n      </MapContext.Consumer>\r\n    </div >\r\n  )\r\n}\r\nexport default Dropdown\r\n","import React, { useState, useEffect } from 'react';\r\nimport { csv } from 'd3';\r\nimport './App.scss';\r\nimport LogoGraphics from './assets/LogoTnC.png';\r\nimport Aside from './components/Aside';\r\nimport MapSection from './components/map-section/MapSection';\r\nimport BrandLogoStatic from './components/map-section/brands/BrandLogoStatic';\r\nimport Dropdown from './components/dropdown/Dropdown';\r\nimport * as topojson from 'topojson-client'\r\nimport coffeeshopData from './assets/data/coffeeshop_index2.csv';\r\nimport map_data from './assets/data/Local_Authority_Districts__2016_simple2.topo.json';\r\n\r\nimport MapContext from './contexts/MapContext';\r\nimport BrandContext from './contexts/BrandContext'\r\nimport PlaceContext from './contexts/PlaceContext'\r\n\r\n\r\nfunction App() {\r\n  const brandLabels = {\r\n    costa: \"Costa\",\r\n    nero: \"Cafe Nero\",\r\n    greggs: \"Greggs\",\r\n    muffin: \"Muffin Break\",\r\n    pret: \"Pret\",\r\n    starbucks: \"Starbucks\",\r\n    esquire: \"Esquire\",\r\n\r\n  }\r\n\r\n  const [chartData, setChartData] = useState(null)\r\n  const [coffeeshopCsvObj, setCoffeeshopCsvObj] = useState(null)\r\n  const [brand, setBrand] = useState(\"costa\")\r\n  const [place, setPlace] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n\r\n    const features = topojson.feature(map_data, \"Local_Authority_Districts__D\");\r\n    // const features = json(map_data);\r\n    const coffeeshopCsv = csv(coffeeshopData);\r\n    Promise.all([features, coffeeshopCsv]).then(values => {\r\n      const csvObj = {}\r\n      values[1].forEach(d => {\r\n        csvObj[d[\"Location Code\"]] = {\r\n          housePrice: d[\"House Prices\"],\r\n          location: d[\"Location\"],\r\n          uid: d[\"Location Code\"],\r\n          population: d[\"Population\"],\r\n          \"per100k\": {\r\n            nero: +d[\"A_CaffeNero\"],\r\n            costa: +d[\"A_Costa\"],\r\n            esquire: +d[\"A_Esquires\"],\r\n            greggs: +d[\"A_Greggs\"],\r\n            muffin: +d[\"A_MuffinBreak\"],\r\n            pret: +d[\"A_PretAManger\"],\r\n            starbucks: +d[\"A_Starbucks\"],\r\n          },\r\n          \"count\": {\r\n            caffeNero: +d[\"C_CaffeNero\"],\r\n            costa: +d[\"C_Costa\"],\r\n            esquires: +d[\"C_Esquires\"],\r\n            greggs: +d[\"C_Greggs\"],\r\n            muffinBreak: +d[\"C_MuffinBreak\"],\r\n            pretAManger: +d[\"C_PretAManger\"],\r\n            starbucks: +d[\"C_Starbucks\"],\r\n          }\r\n        }\r\n      })\r\n      setCoffeeshopCsvObj(csvObj)\r\n      setChartData(values[0].features.map(d => {\r\n        const loc_id = d[\"properties\"][\"lad16cd\"]\r\n        return d = { ...d, ...csvObj[loc_id] }\r\n      }))\r\n    })\r\n  }, [])\r\n  const _placeholder = [\"1st\", \"2nd\", \"3rd\"].map(d => {\r\n    return <div className=\"top-three\" key={d} >\r\n      <span className=\"top-three top-three__icon\">\r\n        <div className=\"brand-placeholder\">{d}</div>\r\n        {/* <BrandLogoStatic brand={d.brand}></BrandLogoStatic> */}\r\n      </span>\r\n      <div className=\"top-three top-three__text\">\r\n        <h5>{brandLabels[d.brand]}</h5>\r\n        <h6><span>{d.value}</span></h6>\r\n      </div>\r\n    </div>\r\n  })\r\n\r\n  return (\r\n    <div className=\"TnC\">\r\n      <Aside class=\"TnC__aside TnC__aside--left\">\r\n        <div className=\"TnC__HeadingContainer\">\r\n          <h1 className=\"TnC__heading\">Coffee Shops Index</h1>\r\n        </div>\r\n        <p className=\"TnC__paragraph TnC__paragraph--left1\">\r\n          Does the value of your home determine the brand of coffee shops you'll have convenient access to?\r\n        </p>\r\n        <p className=\"TnC__paragraph TnC__paragraph--left2\">\r\n          Our Coffee Shops Index uncovers correlations between the location and density of 7 of the most popular coffee shops in the UK and average house prices for 392 cities, boroughs and districts.\r\n        </p>\r\n        {/* <div className=\"TnC__LogoGraphics\">\r\n          <img className=\"TnC__LogoGraphics--left\" src={LogoGraphics} alt=\"Section Graphics\" />\r\n        </div> */}\r\n      </Aside>\r\n      <BrandContext.Provider value={{ brand: brand, setBrand: setBrand }}>\r\n        <MapContext.Provider value={{ chartData: chartData, csvData: coffeeshopCsvObj, brand: brand, place: place, setPlace: setPlace }}>\r\n          <MapSection />\r\n          <PlaceContext.Provider value={{ place: place, setPlace: setPlace }}>\r\n            <Aside class=\"TnC-aside TnC__aside--right\">\r\n              {/* <div className=\"TnC-aside TnC-aside__section-right TnC-aside__section-right--1\" >\r\n              </div> */}\r\n              <div className=\"TnC-aside TnC-aside__section-right TnC-aside__section-right--2\" >\r\n                <Dropdown></Dropdown>\r\n                <div className=\"inside-col\">\r\n\r\n                  <div>\r\n                    <h3 className=\"TnC-aside__selected-place--name\">{coffeeshopCsvObj && coffeeshopCsvObj[place] ? coffeeshopCsvObj[place].location : \"\"}</h3>\r\n\r\n                    <div className=\"attr-wrapper\">\r\n                      <BrandLogoStatic brand=\"home\"></BrandLogoStatic>\r\n                      <h4 className=\"TnC-aside__selected-place--attr\">Average House Price</h4>\r\n                      <div className=\"u__container u__container--white\">\r\n                        {coffeeshopCsvObj && coffeeshopCsvObj[place] ? coffeeshopCsvObj[place].housePrice.replace(\".00\", \"\") : \"\"}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"attr-wrapper\">\r\n                      <BrandLogoStatic brand={brand}></BrandLogoStatic>\r\n                      <h4 className=\"TnC-aside__selected-place--attr\">Number of {brand ? brandLabels[brand] : \"coffe shops\"} per 100,000 people</h4>\r\n                      <div className=\"u__container u__container--white\">\r\n                        {coffeeshopCsvObj && coffeeshopCsvObj[place] ? coffeeshopCsvObj[place][\"per100k\"][brand] : \"\"}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <h4 className=\"TnC-aside__selected-place--attr\">Most popular Coffee Shops in the area</h4>\r\n\r\n                    <div className=\"u__container u__container--tall\">\r\n                      {place ? \"\" : _placeholder}\r\n                      {coffeeshopCsvObj && coffeeshopCsvObj[place] ? Array.from(Object.keys(coffeeshopCsvObj[place][\"per100k\"]).map(d => {\r\n                        return { brand: d, value: coffeeshopCsvObj[place][\"per100k\"][d] }\r\n                      })).sort((a, b) => +b.value - +a.value).slice(0, 3).map(d => {\r\n                        return <div className=\"top-three\" key={`1${d.brand}`} >\r\n                          <span className=\"top-three top-three__icon\">\r\n                            <BrandLogoStatic brand={d.brand}></BrandLogoStatic>\r\n                          </span>\r\n                          <div className=\"top-three top-three__text\">\r\n                            <h5>{brandLabels[d.brand]}</h5>\r\n                            <h6><span>{d.value}</span> per 100,000 people</h6>\r\n                          </div>\r\n                        </div>\r\n                      }) : \"\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n              </div>\r\n            </Aside>\r\n            <Aside >\r\n              <footer className=\"TnC__aside TnC__aside--bottom\"><div className=\"TnC__LogoGraphics\">\r\n                <img className=\"TnC__LogoGraphics--bottom\" src={LogoGraphics} alt=\"Section Graphics\" />\r\n              </div></footer>\r\n            </Aside>\r\n          </PlaceContext.Provider>\r\n        </MapContext.Provider>\r\n      </BrandContext.Provider>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('TnC-DataVis')\n);"],"sourceRoot":""}